{% extends 'base.html.twig' %}

{% block title %}{{ book.title }}{% endblock %}

{% block body %}
    <h1>{{ book.title }}</h1>

    <div class="mb-3">
        <strong>Auteur :</strong> {{ book.author }}
    </div>
    <div class="mb-3">
        <strong>Genre :</strong> {{ book.genre }}
    </div>
    <div class="mb-3">
        <strong>Description :</strong> {{ book.description ?: 'Aucune description fournie.' }}
    </div>
    {% if book.coverImage %}
        <div class="mb-3">
            <img src="{{ asset('uploads/covers/' ~ book.coverImage) }}" alt="{{ book.title }}" class="img-fluid">
        </div>
    {% endif %}

    <a href="{{ path('books_index') }}" class="btn btn-secondary">Retour Ã  la liste</a>

    {% if app.user == book.user or is_granted('ROLE_ADMIN') %}
        <a href="{{ path('books_edit', {slug: book.slug}) }}" class="btn btn-warning">Modifier</a>
        <form method="post" action="{{ path('books_delete', {slug: book.slug}) }}" style="display:inline-block;">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ book.id) }}">
            <button class="btn btn-danger" onclick="return confirm('Supprimer ce livre ?');">Supprimer</button>
        </form>
    {% endif %}
{% endblock %}
